/* --- GLOBAL RESET: CHá»NG Vá»  GIAO DIá»†N --- */
* {
  box-sizing: border-box !important;
}
/* Chá»‘ng trÃ n - nhÆ°ng loáº¡i trá»« nav */
body, .page, .section, .hero, .movie-grid, .footer, main {
  max-width: 100vw !important;
}
/* ============================================
   RESPONSIVE.CSS - FINAL FIX (BANNER, FOOTER, POPUP)
   ============================================ */
/* --- FIX Lá»–I 2 TRANG ÄÃˆ NHAU (QUAN TRá»ŒNG) --- */
.hidden {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  height: 0 !important;
  width: 0 !important;
  pointer-events: none !important;
}

/* FIX GLOBAL: NÃšT ÄÄ‚NG NHáº¬P KHÃ”NG Bá»Š CHÃˆN Ã‰P */
#loginBtn {
  white-space: nowrap !important;
  flex-shrink: 0 !important;
  min-width: 100px !important;
  padding: 8px 16px !important;
  overflow: visible !important;
}
#loginBtn span {
  white-space: nowrap !important;
}
.nav-actions {
  flex-shrink: 0 !important;
  flex-wrap: nowrap !important;
  gap: 8px !important;
}
.nav-menu {
  flex-shrink: 1 !important; /* Menu co láº¡i khi thiáº¿u chá»— */
  min-width: 0 !important;
  gap: 4px !important;
}
.nav-menu .nav-link {
  white-space: nowrap !important;
  padding: 6px 8px !important;
  font-size: 13px !important;
}

/* 1. TABLET (iPad) */
@media (max-width: 1366px) {
  .nav-container,
  .section,
  .footer-content {
    padding-left: 20px !important;
    padding-right: 20px !important;
  }

  /* --- FIX POPUP CHO TABLET (iPad) --- */
  /* áº¨n popup hover máº·c Ä‘á»‹nh (Ä‘á»ƒ dÃ¹ng click) */
  .movie-card-wrapper .movie-popup-nfx {
    display: none !important;
  }

  /* Class kÃ­ch hoáº¡t popup khi cháº¡m */
  .movie-card-wrapper.active-mobile {
    z-index: 5000 !important;
    position: relative;
  }

  .movie-card-wrapper.active-mobile .movie-popup-nfx {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important; /* Cho phÃ©p báº¥m vÃ o nÃºt trong popup */
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);

    /* KÃ­ch thÆ°á»›c cho Tablet (Rá»™ng hÆ¡n Mobile xÃ­u) */
    width: 240px !important;
    height: auto;
    z-index: 5001;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.95);
    border: 1px solid var(--accent-primary);
    background: #1f1f2e !important;
    color: #fff !important;
  }

  /* Font chá»¯ Popup Tablet */
  .movie-card-wrapper.active-mobile .popup-header-img {
    height: 130px;
  }
  .movie-card-wrapper.active-mobile .popup-body {
    padding: 12px;
  }
  .movie-card-wrapper.active-mobile .popup-title-new {
    font-size: 15px;
    margin-bottom: 6px;
    line-height: 1.3;
    color: #ffeb3b !important;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
    font-weight: 800 !important;
  }
  .movie-card-wrapper.active-mobile .popup-meta-row {
    font-size: 11px;
    gap: 6px;
    margin-bottom: 10px;
  }
  .movie-card-wrapper.active-mobile .popup-meta-row span {
    color: #0fceeb !important;
  }
  .movie-card-wrapper.active-mobile .btn-popup-play {
    font-size: 13px !important;
    padding: 8px 15px;
    height: 34px;
  }
  .movie-card-wrapper.active-mobile .btn-popup-icon {
    width: 34px;
    height: 34px;
    font-size: 13px;
    background: rgba(255, 255, 255, 0.15) !important;
    color: #fff !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
  }
  .movie-card-wrapper.active-mobile .popup-genres-row {
    display: none;
  }

  /* FIX MENU TABLET: Scroll ngang mÆ°á»£t mÃ  */
  .nav-menu {
    overflow-x: auto !important;
    overflow-y: hidden !important;
    white-space: nowrap !important;
    justify-content: flex-start !important;
    min-width: 0 !important;
    padding-bottom: 0 !important; /* Bá» padding bottom thá»«a */
    padding-right: 60px !important; /* TÄƒng padding Ä‘á»ƒ nÃºt Admin khÃ´ng bá»‹ che */
    /* mask-image removed Ä‘á»ƒ trÃ¡nh lá»—i áº©n icon cuá»‘i cÃ¹ng */
    
    /* áº¨n thanh cuá»™n nhÆ°ng váº«n scroll Ä‘Æ°á»£c (UX hiá»‡n Ä‘áº¡i) */
    scrollbar-width: none; 
    -ms-overflow-style: none;
  }
  .nav-menu::-webkit-scrollbar {
    display: none;
  }
  .nav-menu .nav-link {
    flex-shrink: 0 !important;
  }

  /* FIX PADDING CHO TABLET: TrÃ¡nh bá»‹ che header vÃ  full chiá»u cao */
  /* Chá»‰ Ã¡p dá»¥ng cho Tablet thá»±c sá»± (>768px), KHÃ”NG áº£nh hÆ°á»Ÿng mobile */
  @media (min-width: 769px) {
    .page {
      min-height: 80vh !important;
      padding-top: 100px !important;
    }
  }
  
  /* RiÃªng Tablet dá»c (iPad Portrait) cáº§n padding nhiá»u hÆ¡n */
  @media (min-width: 769px) and (orientation: portrait) {
    .page {
      padding-top: 160px !important;
    }
    .footer {
      margin-top: auto !important;
    }
  }
}

/* --- REDESIGN LOGIN BUTTON (GLOBAL) --- */
/* Quay vá» style gá»‘c (Gradient) nhÆ°ng bo trÃ²n vÃ  Ä‘áº£m báº£o khÃ´ng bá»‹ mÃ©o */
#loginBtn {
  border-radius: 50px !important; /* Bo trÃ²n viÃªn thuá»‘c */
  white-space: nowrap !important;
  flex-shrink: 0 !important;
  box-shadow: 0 0 15px rgba(229, 9, 20, 0.4) !important; /* BÃ³ng Ä‘á» nháº¹ Ä‘Ãºng style */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
}
#loginBtn span {
  white-space: nowrap !important;
  font-weight: 600 !important;
}

/* 2. MOBILE (Äiá»‡n thoáº¡i) */
@media (max-width: 768px) {
  :root {
    --font-hero: 28px;
    --font-xxl: 20px;
    --font-xl: 18px;
  }

  /* --- A. HEADER (FIX MÃ€U NÃšT & HIá»†N ICON THEME) --- */
  /* --- A. HEADER (FIX LIGHT MODE: ICON Tá»° Äá»”I MÃ€U) --- */
  /* --- A. HEADER (FINAL: FIX Lá»–I CHá»’NG ICON) --- */
  .nav-container {
    padding: 5px 8px !important;
    gap: 4px;
    height: 60px;
    z-index: 2000;
    justify-content: space-between !important;
    background: var(--bg-primary) !important;
  }

  /* FIX PADDING PAGE MOBILE (TrÃ¡nh khoáº£ng Ä‘en thá»«a do rule tablet 100px) */
  .page {
    padding-top: 60px !important;
    min-height: 100vh !important;
    background: var(--bg-primary) !important;
  }

  /* 1. Logo */
  .nav-logo {
    display: flex !important;
    align-items: center;
    gap: 4px;
    flex: 1; /* Tá»± Ä‘á»™ng chiáº¿m khoáº£ng trá»‘ng thá»«a bÃªn trÃ¡i */
    min-width: 0;
    margin-right: 5px;
  }
  .nav-logo i {
    font-size: 18px !important;
    color: #e50914 !important;
    flex-shrink: 0;
  }
  .nav-logo span {
    display: block !important;
    font-size: 13px !important;
    font-weight: 700 !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--text-primary) !important;
  }

  /* 2. NhÃ³m nÃºt bÃªn pháº£i (Chá»©a táº¥t cáº£ icon) */
  .nav-actions {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    flex-shrink: 0;
    flex-wrap: nowrap !important;
  }
  .nav-utilities {
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    flex-shrink: 0 !important;
  }

  /* ðŸ‘‡ [FIX QUAN TRá»ŒNG] Há»™p chá»©a Login + Avatar pháº£i lÃ  hÃ ng ngang */
  #authContainer {
    display: flex !important;
    align-items: center !important;
    flex-direction: row !important;
    gap: 8px !important;
    margin: 0 !important;
  }

  .wallet-btn,
  #connectWalletBtn,
  .theme-toggle,
  .mobile-menu-toggle {
    width: 32px !important;
    height: 32px !important;
    padding: 0 !important;
    margin: 0 !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    font-size: 0 !important;
    background: rgba(128, 128, 128, 0.15) !important;
    border: 1px solid rgba(128, 128, 128, 0.1) !important;
    color: var(--text-primary) !important;
    flex-shrink: 0 !important;
  }
  .wallet-btn i,
  #connectWalletBtn i,
  .theme-toggle i,
  .mobile-menu-toggle i {
    margin: 0 !important;
    font-size: 14px !important;
    color: var(--text-primary) !important;
    display: block !important;
  }
  .wallet-btn span,
  .wallet-btn .wallet-btn-text,
  #connectWalletBtn span {
    display: none !important;
  }

  /* FIX: Dropdown (Select) khÃ´ng bá»‹ trÃ n mÃ n hÃ¬nh */
  .form-select {
    max-width: 100% !important;
    white-space: nowrap;
    
    /* Cho phÃ©p cuá»™n ngang náº¿u chá»¯ quÃ¡ dÃ i thay vÃ¬ cáº¯t bá»›t */
    overflow-x: auto !important; 
    text-overflow: unset !important;
  }
  
  /* 4. LOGIC Xá»¬ LÃ NÃšT ÄÄ‚NG NHáº¬P */
  /* TrÆ°á»ng há»£p 1: ChÆ°a Ä‘Äƒng nháº­p - Icon trÃ²n giá»‘ng avatar */
  #loginBtn {
    width: 32px !important;
    height: 32px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #e50914 0%, #ff0055 100%) !important;
    box-shadow: 0 2px 10px rgba(229, 9, 20, 0.4);
    border: none !important;
    min-width: unset !important;
  }
  #loginBtn i {
    font-size: 14px !important;
    margin: 0 !important;
    color: #fff !important;
  }
  #loginBtn span {
    display: none !important;
  }

  /* TrÆ°á»ng há»£p 2: ÄÃ£ Ä‘Äƒng nháº­p (Avatar hiá»‡n) */
  #authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn {
    width: 30px !important;
    height: 30px !important;
    padding: 0 !important;
    border-radius: 50% !important;
    justify-content: center !important;
    background: linear-gradient(135deg, #e50914 0%, #ff0055 100%) !important;
    display: flex !important;
    margin-right: 0 !important;
  }
  #authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn span {
    display: none !important;
  }
  #authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn i {
    margin: 0 !important;
    font-size: 14px !important;
  }

  /* 5. AVATAR USER */
  #userMenuTrigger {
    width: 32px !important;
    height: 32px !important;
    border-radius: 50% !important;
    overflow: hidden;
    border: 1.5px solid #f02c3c !important;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0 !important;
    margin: 0 !important;
  }
  .nav-user-avatar,
  #userMenuTrigger img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
  }

  /* 6. Menu trÆ°á»£t - Cáº£i thiá»‡n UX mobile */
  .nav-menu {
    position: fixed;
    top: 60px;
    right: 0;
    width: 100%;
    height: calc(100dvh - 60px);
    background: var(--bg-primary);
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    /* Override tablet rules (padding-right:60px, white-space:nowrap) */
    padding: 10px 0 30px !important;
    white-space: normal !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    transform: translateX(100%);
    transition: transform 0.3s ease;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    z-index: 1999;
    visibility: hidden;
    pointer-events: none;
  }
  .nav-menu.active {
    transform: translateX(0);
    visibility: visible;
    pointer-events: auto;
  }
  .nav-menu .nav-link {
    width: 100% !important;
    padding: 16px 24px !important;
    margin: 0 !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 0 !important;
    display: flex !important;
    align-items: center;
    gap: 14px;
    box-sizing: border-box !important;
    transition: background 0.2s;
    position: relative;
    flex-shrink: 0;
  }
  /* Giá»¯ ::after gradient cho active item - nhÆ°ng full width */
  .nav-menu .nav-link::after {
    content: "" !important;
    display: block !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    width: 0 !important;
    height: 2px !important;
    background: linear-gradient(90deg, #e50914, #ff0055) !important;
    transform: none !important;
    transition: width 0.3s !important;
  }
  .nav-menu .nav-link.active::after {
    width: 100% !important;
  }
  .nav-menu .nav-link:last-child {
    border-bottom: none !important;
  }
  .nav-menu .nav-link:hover,
  .nav-menu .nav-link.active {
    background: rgba(229, 9, 20, 0.1);
  }
  .nav-menu .nav-link i {
    font-size: 18px !important;
    width: 24px;
    text-align: center;
    flex-shrink: 0;
    color: var(--accent-primary, #e50914);
  }
  .nav-menu .nav-link.active i {
    color: #ff0055;
  }

  /* --- B. FIX Lá»–I BANNER (Thu gá»n láº¡i) --- */
  .hero {
    min-height: auto !important;
    padding: 15px 15px 30px !important;
    /* ðŸ‘‡ ThÃªm 2 dÃ²ng nÃ y Ä‘á»ƒ cÄƒn giá»¯a ná»™i dung theo chiá»u dá»c náº¿u banner tháº¥p */
    display: flex !important;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .hero-content {
    margin-top: 0 !important;
    width: 100%;
    text-align: center; /* CÄƒn giá»¯a ná»™i dung */
  }
  /* Thu nhá» chá»¯ tiÃªu Ä‘á» vÃ  mÃ´ táº£ */
  .hero-title {
    font-size: 22px !important; /* Chá»¯ nhá» láº¡i */
    margin-bottom: 5px !important;
    line-height: 1.2 !important;
  }
  .hero-subtitle {
    font-size: 12px !important;
    margin-bottom: 15px !important;
    /* Cáº¯t bá»›t náº¿u dÃ i quÃ¡ 2 dÃ²ng */
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  /* Thu nhá» nÃºt báº¥m */
  .hero-actions .btn {
    padding: 8px 16px !important;
    font-size: 12px !important;
    height: 36px !important;
  }
  /* --- C. FIX Lá»–I FOOTER (Gá»ŒN GÃ€NG 2 Cá»˜T) --- */
  .footer {
    padding: 20px 0 10px !important; /* Giáº£m khoáº£ng cÃ¡ch trÃªn dÆ°á»›i */
  }

  .footer-content {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important; /* Chia thÃ nh 2 cá»™t Ä‘á»u nhau */
    gap: 15px !important;
    padding: 0 15px !important;
  }

  /* Logo & Giá»›i thiá»‡u: Náº±m trÃªn cÃ¹ng, chiáº¿m trá»n bá» ngang */
  .footer-section:nth-child(1) {
    grid-column: span 2;
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding-bottom: 10px !important;
    margin-bottom: 0 !important;
  }
  /* áº¨n dÃ²ng mÃ´ táº£ dÃ i dÃ²ng Ä‘i cho gá»n */
  .footer-section:nth-child(1) p {
    display: none;
  }

  /* Pháº§n Thá»‘ng kÃª: Náº±m dÆ°á»›i cÃ¹ng, chiáº¿m trá»n bá» ngang */
  .stats-box {
    grid-column: span 2;
    margin-top: 0 !important;
    padding: 10px !important;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 8px;
  }

  /* Chá»‰nh font chá»¯ footer nhá» láº¡i */
  .footer-section h4 {
    font-size: 14px !important;
    margin-bottom: 10px !important;
  }
  .footer-section ul li {
    margin-bottom: 5px !important;
  }
  .footer-section ul li a {
    font-size: 12px !important;
  }

  /* --- C.5 FIX TRANG CHI TIáº¾T PHIM (MOVIE DETAIL PAGE) --- */
  .movie-detail {
    padding: 55px 12px 30px !important; /* Giáº£m padding trÃªn dÆ°á»›i */
  }

  .movie-detail-header {
    display: grid !important;
    grid-template-columns: 1fr !important; /* Äá»•i thÃ nh 1 cá»™t trÃªn mobile */
    gap: var(--spacing-md) !important; /* Giáº£m khoáº£ng cÃ¡ch */
    margin-bottom: var(--spacing-lg) !important;
  }

  .movie-poster {
    max-width: 100%;
    height: auto;
    margin: 0 auto;
  }

  .movie-poster img {
    width: 100%;
    height: auto;
    max-height: 400px;
    object-fit: cover;
  }

  .movie-info h1 {
    font-size: 20px !important; /* Giáº£m Ä‘á»™ lá»›n tiÃªu Ä‘á» */
    margin-bottom: 10px !important;
    margin-top: 5px;
  }

  .movie-meta {
    gap: 8px !important;
    margin-bottom: 10px !important;
    flex-wrap: wrap;
  }

  .movie-meta-item {
    font-size: 12px !important;
    gap: 4px !important;
  }

  .movie-meta-item i {
    font-size: 13px !important;
  }

  .movie-description {
    font-size: 13px !important;
    line-height: 1.6;
    margin-bottom: 15px !important;
  }

  .card-tags {
    gap: 5px !important;
    margin-bottom: 10px !important;
  }

  .card-tags .tag {
    font-size: 11px !important;
    padding: 4px 8px !important;
  }

  .movie-actions {
    flex-direction: column !important;
    gap: 8px !important;
  }

  .card-price {
    font-size: 18px !important;
  }

  .btn-lg {
    width: 100% !important;
    padding: 10px 15px !important;
    font-size: 14px !important;
  }

  /* Video player & Episodes */
  .video-container {
    margin-top: 20px !important;
  }

  .episodes-section {
    margin-top: 15px !important;
  }

  .episodes-list {
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)) !important;
    gap: 6px !important;
  }

  .episode-item {
    padding: 6px !important;
    font-size: 11px !important;
  }

  /* Comment Form & Rating Section */
  .comment-form {
    padding: 12px !important;
  }

  .rating-input {
    display: flex !important;
    flex-wrap: wrap !important; /* Cho phÃ©p xuá»‘ng dÃ²ng */
    align-items: flex-start !important;
    gap: 6px !important;
    margin-bottom: 12px !important;
  }

  .rating-input label {
    width: 100%;
    display: block !important;
    margin-bottom: 6px !important;
    font-size: 13px !important;
  }

  .rating-stars {
    display: flex !important;
    flex-wrap: wrap !important; /* Cho phÃ©p sao xuá»‘ng dÃ²ng */
    gap: 3px !important;
    order: 3; /* Äá»ƒ sao náº±m dÆ°á»›i label */
  }

  .rating-stars i {
    font-size: 18px !important;
    margin: 0 !important;
  }

  .rating-value {
    font-size: 13px !important;
    margin-left: 0 !important;
    white-space: nowrap;
    order: 4;
    width: 100%;
    margin-top: 6px;
  }

  .comment-form .form-group {
    margin-bottom: 10px !important;
  }

  .form-textarea {
    font-size: 13px !important;
    min-height: 80px !important;
    padding: 8px !important;
  }

  /* --- D. LÆ¯á»šI PHIM 4 Cá»˜T --- */
  .movie-grid {
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 6px !important;
  }
  .card-body {
    padding: 4px !important;
  }
  .card-title {
    font-size: 10px !important;
    margin-bottom: 2px !important;
  }
  .card-meta {
    font-size: 9px !important;
  }

  /* --- E. FIX POPUP TO QUÃ (Thu nhá» & Tinh chá»‰nh) --- */
  .movie-card-wrapper .movie-popup-nfx {
    display: none !important;
  }

  .movie-card-wrapper.active-mobile {
    z-index: 5000 !important;
    position: relative;
  }

  .movie-card-wrapper.active-mobile .movie-popup-nfx {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);

    /* ðŸ‘‡ GIáº¢M KÃCH THÆ¯á»šC POPUP */
    width: 225px !important;
    height: auto;
    z-index: 5001;
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.95);
    border: 1px solid var(--accent-primary);
    /* ðŸ‘‡ QUAN TRá»ŒNG: Ã‰p ná»n mÃ u tá»‘i Ä‘á»ƒ chá»¯ tráº¯ng luÃ´n ná»•i báº­t */
    background: #1f1f2e !important;
    color: #fff !important;
  }

  /* Font chá»¯ Popup nhá» láº¡i */
  .movie-card-wrapper.active-mobile .popup-header-img {
    height: 110px;
  }
  .movie-card-wrapper.active-mobile .popup-body {
    padding: 8px;
  }
  .movie-card-wrapper.active-mobile .popup-title-new {
    font-size: 13px;
    margin-bottom: 4px;
    line-height: 1.3;
  }
  .movie-card-wrapper.active-mobile .popup-meta-row {
    font-size: 9px;
    gap: 4px;
    margin-bottom: 6px;
  }
  .movie-card-wrapper.active-mobile .btn-popup-play {
    font-size: 11px !important;
    padding: 5px 10px;
    height: 28px;
  }
  .movie-card-wrapper.active-mobile .btn-popup-icon {
    width: 28px;
    height: 28px;
    font-size: 10px;
  }

  /* áº¨n bá»›t thÃ´ng tin khÃ´ng cáº§n thiáº¿t trÃªn mobile cho gá»n */
  .movie-card-wrapper.active-mobile .popup-genres-row {
    display: none;
  }

  /* --- POPUP PHIM THÃ”NG MINH (SMART POSITIONING) --- */
  
  .movie-card-wrapper {
      position: relative;
      z-index: 1; 
  }

  /* Khi active (Ä‘Æ°á»£c JS thÃªm class): TÄƒng z-index cao nháº¥t */
  .movie-card-wrapper.active-mobile {
      z-index: 10000 !important;
  }

  .movie-popup-nfx {
    position: absolute !important;
    top: 50% !important;
    
    /* Máº¶C Äá»ŠNH: CENTER */
    left: 50% !important;
    right: auto !important;
    transform: translate(-50%, -50%) scale(1.15) !important;
    
    width: 100% !important; 
    height: auto !important;
    min-height: 100% !important;
    
    z-index: 10001 !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    
    opacity: 0; 
    visibility: hidden;
    pointer-events: none;
    transition: opacity 0.2s, visibility 0.2s;
    
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
  }

  /* --- LOGIC HIá»‚N THá»Š Dá»°A TRÃŠN JS --- */
  
  /* 1. Má»Ÿ popup khi cÃ³ class .active-mobile */
  .movie-card-wrapper.active-mobile .movie-popup-nfx {
      opacity: 1 !important;
      visibility: visible !important;
      pointer-events: auto !important;
  }

  /* 2. Náº¿u á»Ÿ lá» TRÃI -> Má»Ÿ lá»‡ch sang PHáº¢I */
  .movie-card-wrapper.popup-align-left .movie-popup-nfx {
      left: 0 !important;
      right: auto !important;
      transform: translate(0, -50%) scale(1.15) !important; /* Neo bÃªn trÃ¡i, scale tá»« tÃ¢m trÃ¡i */
      transform-origin: left center !important;
  }

  /* 3. Náº¿u á»Ÿ lá» PHáº¢I -> Má»Ÿ lá»‡ch sang TRÃI */
  .movie-card-wrapper.popup-align-right .movie-popup-nfx {
      left: auto !important;
      right: 0 !important;
      transform: translate(0, -50%) scale(1.15) !important; /* Neo bÃªn pháº£i, scale tá»« tÃ¢m pháº£i */
      transform-origin: right center !important;
  }
  
  /* Äáº£m báº£o tÆ°Æ¡ng tÃ¡c */
  .movie-popup-nfx button,
  .movie-popup-nfx a,
  .movie-popup-nfx i,
  .movie-popup-nfx .popup-actions {
      pointer-events: auto !important;
  }

  /* ðŸ‘‡ FIX: Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin trong Popup Mobile */
  .movie-popup-nfx .popup-genres-row,
  .movie-popup-nfx .popup-meta-row span {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      font-size: 11px; /* Chá»¯ nhá» cho vá»«a */
  }
  
  .movie-popup-nfx .popup-genres-row {
      margin-top: 4px;
      color: #ccc;
      display: flex !important;
      align-items: center;
      gap: 5px;
  }

  /* Fix Admin Sidebar */
  .admin-sidebar {
    display: block !important;
    position: fixed !important;
    top: 0;
    left: -100% !important;
    width: 260px !important;
    height: 100vh;
    z-index: 6000;
    transition: left 0.3s;
    background: var(--bg-secondary);
  }
  .admin-sidebar.active {
    left: 0 !important;
  }
  .admin-content {
    margin-left: 0 !important;
    padding: 15px;
  }
  #adminSidebarOverlay {
    z-index: 5999 !important;
  }
  /* --- G. FIX Lá»–I GIAO DIá»†N LIGHT MODE & THá»‚ LOáº I (Má»šI) --- */

  /* 1. Fix TiÃªu Ä‘á» phim khÃ³ Ä‘á»c á»Ÿ Light Mode */
  [data-theme="light"] .card-title {
    color: #efef0f !important; /* Chuyá»ƒn thÃ nh mÃ u Ä‘en Ä‘áº­m */
    font-weight: 700 !important;
  }
  [data-theme="light"] .card-meta {
    color: #555 !important; /* MÃ u phá»¥ chuyá»ƒn thÃ nh xÃ¡m Ä‘áº­m */
  }
  /* LÃ m ná»n tháº» phim á»Ÿ Lightmode sÃ¡ng hÆ¡n chÃºt Ä‘á»ƒ tÃ¡ch biá»‡t */
  [data-theme="light"] .movie-card-static {
    background: #fff !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  /* 2. Fix Tháº» Thá»ƒ Loáº¡i bá»‹ kÃ©o dÃ i (DÃ¹ng selector máº¡nh Ä‘á»ƒ Ã©p vá» 2 cá»™t) */
  div#categoriesList {
    grid-template-columns: repeat(2, 1fr) !important; /* Ã‰P Cá»¨NG 2 Cá»˜T */
    gap: 12px !important;
    display: grid !important;
  }

  /* Reset tháº» thá»ƒ loáº¡i Ä‘á»ƒ nÃ³ náº±m ngang (dáº¡ng viÃªn thuá»‘c), khÃ´ng bá»‹ dÃ i thÃ²ng */
  div#categoriesList .category-card-pro {
    width: 100% !important;
    aspect-ratio: 2.5 / 1 !important; /* Tá»‰ lá»‡ chá»¯ nháº­t ngang (Rá»™ng 2.5 : Cao 1) */
    min-height: unset !important;
    height: auto !important;
    padding: 10px !important;

    /* Flex Ä‘á»ƒ icon vÃ  chá»¯ náº±m ngang */
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: flex-start !important;
  }

  /* Chá»‰nh ná»™i dung bÃªn trong náº±m ngang */
  div#categoriesList .cat-content {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    text-align: left !important;
    width: 100%;
    gap: 10px !important;
  }

  /* Icon nhá» láº¡i vÃ  náº±m bÃªn trÃ¡i */
  div#categoriesList .cat-icon-box {
    width: 32px !important;
    height: 32px !important;
    margin-bottom: 0 !important; /* Bá» margin dÆ°á»›i cÅ© */
    flex-shrink: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  div#categoriesList .cat-icon-box i {
    font-size: 14px !important;
  }

  /* Chá»¯ tiÃªu Ä‘á» náº±m bÃªn pháº£i icon */
  div#categoriesList .cat-title {
    font-size: 13px !important;
    margin: 0 !important;
    text-transform: uppercase;
    font-weight: 800;
    line-height: 1.2;
    width: auto !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    flex: 1 !important;
  }

  /* áº¨n dÃ²ng phá»¥ 'KhÃ¡m phÃ¡ ngay' cho gá»n */
  div#categoriesList .cat-subtitle {
    display: none !important;
  }
  /* --- G. FIX GIAO DIá»†N LIGHT MODE & POPUP (FINAL) --- */

  /* 1. THáºº PHIM á»ž NGOÃ€I (Ná»n tráº¯ng -> Chá»¯ Äen) */
  [data-theme="light"] .card-title {
    color: #ffeb3b !important; /* MÃ u Ä‘en tuyá»n cho dá»… Ä‘á»c */
    font-weight: 700 !important;
  }
  [data-theme="light"] .card-meta {
    color: #ec3434 !important;
    font-weight: 600 !important;
  }
  [data-theme="light"] .movie-card-static {
    background: #fff !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    border: 1px solid #ddd !important;
  }

  /* 2. POPUP CHI TIáº¾T (LuÃ´n ná»n tá»‘i -> Chá»¯ VÃ ng) */
  .movie-card-wrapper.active-mobile .movie-popup-nfx {
    background: #1f1f2e !important; /* LuÃ´n giá»¯ ná»n tá»‘i cho dá»‹u máº¯t */
    color: #fff !important;
    border: 1px solid var(--accent-primary) !important;
  }

  /* ðŸ‘‡ TIÃŠU Äá»€ TRONG POPUP: MÃ€U VÃ€NG Rá»°C Rá»  */
  .movie-card-wrapper.active-mobile .popup-title-new {
    color: #ffeb3b !important; /* MÃ u vÃ ng chanh siÃªu ná»•i */
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8); /* BÃ³ng Ä‘en giÃºp chá»¯ cÃ ng ná»•i hÆ¡n */
    font-weight: 800 !important;
  }

  /* CÃ¡c thÃ´ng sá»‘ khÃ¡c trong Popup (NÄƒm, Thá»i lÆ°á»£ng...) mÃ u tráº¯ng sÃ¡ng */
  .movie-card-wrapper.active-mobile .popup-meta-row span {
    color: #0fceeb !important;
  }

  /* Fix láº¡i cÃ¡c nÃºt trÃ²n trong popup cho dá»… nhÃ¬n */
  .movie-card-wrapper.active-mobile .btn-popup-icon {
    background: rgba(255, 255, 255, 0.15) !important;
    color: #fff !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
  }
  /* --- I. FIX MENU USER (V11 - TÃCH BIá»†T Sá» DÆ¯ VÃ€ NÃšT Náº P) --- */

  /* 1. KHUNG MENU (Ná»n Äen chuáº©n Dark Mode) */
  [data-theme="light"] .user-dropdown,
  [data-theme="light"] .profile-dropdown,
  [data-theme="light"] #userMenu,
  [data-theme="light"] #userDropdown {
    background-color: #1f1f2e !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    color: #ffffff !important;
  }

  /* 2. [QUAN TRá»ŒNG] RESET "Sá» DÆ¯ 0 C" Vá»€ TRONG SUá»T */
  /* TÃ¬m táº¥t cáº£ tháº» span/div chá»©a sá»‘ dÆ° vÃ  xÃ³a ná»n tráº¯ng Ä‘i */
  [data-theme="light"] .user-dropdown span,
  [data-theme="light"] .user-dropdown div,
  [data-theme="light"] .user-dropdown b,
  [data-theme="light"] .user-dropdown strong {
    background-color: transparent !important; /* XÃ³a ná»n tráº¯ng sai */
    color: #ffffff !important; /* Chá»¯ tráº¯ng */
    border: none !important;
    box-shadow: none !important;
  }

  /* 3. [QUAN TRá»ŒNG] CHá»ˆ TÃ” Ná»€N TRáº®NG CHO NÃšT LINK "Náº P" */
  /* Chá»‰ tÃ¡c Ä‘á»™ng vÃ o tháº» a (Ä‘Æ°á»ng dáº«n) hoáº·c button nhá» */
  [data-theme="light"] .user-dropdown a:not(.btn-block):not(.w-full),
  [data-theme="light"] .user-dropdown button.btn-sm {
    background-color: #ffffff !important; /* ðŸ‘‰ Ná»n TRáº®NG */
    color: #0ea5e9 !important; /* ðŸ‘‰ Chá»¯ XANH (Blue) */

    border-radius: 50px !important;
    padding: 4px 12px !important; /* TÄƒng padding chÃºt cho Ä‘áº¹p */
    font-size: 11px !important;
    font-weight: 800 !important;
    margin-left: 10px !important;
    display: inline-block !important;
    text-decoration: none !important;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2) !important;
    border: none !important;
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* 4. KHÃ”I PHá»¤C NÃšT TO "NÃ‚NG Cáº¤P NGAY" (MÃ u Ä‘á») */
  [data-theme="light"] .user-dropdown button.w-full,
  [data-theme="light"] .user-dropdown .btn-block {
    background: linear-gradient(135deg, #e50914 0%, #ff0055 100%) !important;
    color: #ffffff !important;
    box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3) !important;
    border: none !important;
  }

  /* --- J. FIX TRÃ€N GRID (Watch Party & Admin) --- */
  .party-grid,
  .stats-grid {
    grid-template-columns: 1fr !important;
  }
  .party-container {
    padding: 15px !important;
  }

  /* 5. TAG VIP (VÃ ng) */
  [data-theme="light"] .user-dropdown .vip-tag,
  [data-theme="light"] .user-dropdown span.vip-tag {
    background: #ffeb3b !important; /* MÃ u vÃ ng */
    color: #000 !important; /* Chá»¯ Ä‘en */
  }

  /* 6. DARK MODE (Giá»¯ nguyÃªn) */
  [data-theme="dark"] .user-dropdown,
  [data-theme="dark"] .profile-dropdown {
    background-color: #1f1f2e !important;
    color: #ffffff !important;
  }
}

/* LÃ m gá»n hiá»ƒn thá»‹ bÃ¬nh luáº­n trÃªn mobile */
.comment-item {
  padding: 10px 8px !important;
  gap: 8px !important;
  border-radius: 10px !important;
  min-height: unset !important;
}
.comment-avatar {
  width: 32px !important;
  height: 32px !important;
  font-size: 15px !important;
  border-radius: 50% !important;
}
.comment-content {
  font-size: 13px !important;
}
.comment-header {
  flex-direction: column !important;
  align-items: flex-start !important;
  gap: 2px !important;
  margin-bottom: 2px !important;
}
.comment-author {
  font-size: 13px !important;
  font-weight: 700 !important;
}
.comment-rating {
  font-size: 12px !important;
  gap: 2px !important;
  margin-top: 0 !important;
}
.comment-text {
  font-size: 13px !important;
  margin-bottom: 2px !important;
  line-height: 1.5 !important;
}
.comment-time {
  font-size: 11px !important;
  color: #aaa !important;
  margin-bottom: 2px !important;
}
.comment-actions {
  margin-top: 4px !important;
  display: flex !important;
  justify-content: flex-start !important;
}

/* ============================================
   FIX Lá»–I CHÃ‚N TRANG & THá»NG KÃŠ LIGHT MODE (GLOBAL - PC & MOBILE)
   ============================================ */

/* 1. Äá»•i mÃ u khung thá»‘ng kÃª sang xÃ¡m nháº¡t Ä‘á»ƒ ná»•i báº­t trÃªn ná»n tráº¯ng */
[data-theme="light"] .stats-box {
  background: #f3f4f6 !important;
  border: 1px solid #d1d5db !important;
}

/* 2. Äá»•i mÃ u chá»¯ "Äang Online", "Tá»•ng truy cáº­p"... sang mÃ u Ä‘en */
[data-theme="light"] .stat-label {
  color: #374151 !important;
}

/* 3. Äá»•i mÃ u CON Sá» (174, 15 phÃºt...) sang mÃ u Ä‘en Ä‘áº­m */
[data-theme="light"] .stat-value {
  color: #000000 !important;
  font-weight: 800 !important;
}

/* 4. Äá»•i mÃ u cÃ¡c Icon trong thá»‘ng kÃª sang mÃ u Äá» cho Ä‘áº¹p */
[data-theme="light"] .stats-box i {
  color: #e50914 !important;
}

/* 5. Tiá»‡n thá»ƒ sá»­a luÃ´n mÃ u tiÃªu Ä‘á» Footer (KhÃ¡m PhÃ¡, Há»— Trá»£...) sang Ä‘en */
[data-theme="light"] .footer-section h4 {
  color: #111 !important;
}
/* Sá»­a mÃ u cÃ¡c Ä‘Æ°á»ng link bÃªn dÆ°á»›i */
[data-theme="light"] .footer-section ul li a {
  color: #555 !important;
}
/* ======================================================
   HIá»†U á»¨NG VOICE CHAT (GLOBAL - ÃP Dá»¤NG CHO Má»ŒI MÃ€N HÃŒNH)
   ====================================================== */
.is-speaking .avatar-img,
img.avatar-img.is-speaking {
  border: 3px solid #00ff6a !important; /* Xanh lÃ¡ dáº¡ quang */
  box-shadow: 0 0 15px #00ff6a !important; /* PhÃ¡t sÃ¡ng máº¡nh */
  transform: scale(1.15) !important;
  transition: all 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
  z-index: 100 !important;
}

/* Hiá»‡u á»©ng rung ná»n cho cáº£ dÃ²ng tÃªn */
.member-item.is-speaking {
  background: rgba(0, 255, 106, 0.15) !important;
  border: 1px solid rgba(0, 255, 106, 0.3) !important;
}
/* ======================================================
   WATCH PARTY: FINAL FIX (MOBILE & LIGHT MODE)
   ====================================================== */

/* --- 1. Máº¶C Äá»ŠNH (DARK MODE) - KHÃ”I PHá»¤C MÃ€U CHá»® --- */
/* VÃ¬ Ä‘Ã£ xÃ³a style cá»©ng trong JS, ta pháº£i Ä‘á»‹nh nghÄ©a mÃ u á»Ÿ Ä‘Ã¢y */
.member-name {
  color: #ffffff; /* Máº·c Ä‘á»‹nh chá»¯ tráº¯ng */
  font-weight: 700;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 120px;
  display: inline-block;
  vertical-align: middle;
}
.member-role {
  font-size: 11px;
  color: #aaaaaa; /* Máº·c Ä‘á»‹nh xÃ¡m */
  display: block;
}
.member-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px;
  margin-bottom: 5px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
}
.member-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  object-fit: cover;
}
.member-actions {
  display: flex;
  align-items: center;
  gap: 5px;
}

/* --- 2. LIGHT MODE (CHáº¾ Äá»˜ SÃNG) --- */
/* DÃ¹ng body[data-theme="light"] Ä‘á»ƒ tÄƒng Ä‘á»™ Æ°u tiÃªn (Specificity) */

/* Sidebar & Tab */

body[data-theme="light"] .room-tab {
  color: #65676b !important;
}
body[data-theme="light"] .room-tab.active {
  color: #0084ff !important;
  border-bottom-color: #0084ff !important;
  background: rgba(0, 132, 255, 0.05) !important;
}

/* Danh sÃ¡ch thÃ nh viÃªn (Light Mode) */
body[data-theme="light"] .member-item {
  background-color: #ffffff !important;
  border: 1px solid #e4e6eb !important;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}
body[data-theme="light"] .member-name {
  color: #050505 !important; /* ðŸ‘‰ CHá»® ÄEN */
}
body[data-theme="light"] .member-role {
  color: #65676b !important; /* ðŸ‘‰ ROLE XÃM Äáº¬M */
}
body[data-theme="light"] .member-item:hover {
  background-color: #f2f2f2 !important;
}

/* Chat Input (Light Mode) */
body[data-theme="light"] .chat-input-area {
  background: #ffffff !important;
  border-top: 1px solid #e4e6eb !important;
}
body[data-theme="light"] #chatInput {
  background: #f0f2f5 !important;
  color: #050505 !important;
  border: 1px solid #ddd !important;
}
body[data-theme="light"] #chatInput::placeholder {
  color: #65676b !important;
}

/* Tin nháº¯n Chat (Light Mode) */
body[data-theme="light"] .chat-msg:not(.me) .text {
  background-color: #e4e6eb !important;
  color: #050505 !important;
}
body[data-theme="light"] .chat-msg.me .text {
  background-color: #0084ff !important;
  color: #ffffff !important;
}
body[data-theme="light"] .chat-msg .author {
  color: #65676b !important;
}

/* ======================================================
   WATCH PARTY: Báº¢N FULL (LAYOUT MOBILE + LIGHT MODE + HOST)
   ====================================================== */

/* --- 1. MÃ€U CHá»® CHá»¨C DANH (HOST/MEMBER) --- */
.role-host {
  color: #f1c40f;
  font-weight: 800;
}
.role-member {
  color: #aaa;
}

/* --- 2. LIGHT MODE (CHáº¾ Äá»˜ SÃNG - QUAN TRá»ŒNG) --- */
/* DÃ¹ng selector máº¡nh Ä‘á»ƒ Ä‘Ã¨ má»i thá»© */

[data-theme="light"] .room-tab {
  color: #555 !important;
}
[data-theme="light"] .room-tab.active {
  color: #0084ff !important;
  background: rgba(0, 132, 255, 0.1) !important;
}

/* Danh sÃ¡ch thÃ nh viÃªn (Light Mode) */
[data-theme="light"] .member-item {
  background-color: #ffffff !important;
  border: 1px solid #eee !important;
  color: #333 !important;
}
[data-theme="light"] .member-name {
  color: #000000 !important; /* Chá»¯ Ä‘en tuyá»n */
}
[data-theme="light"] .role-host {
  color: #d35400 !important; /* Cam Ä‘áº­m (thay vÃ¬ vÃ ng chÃ³i) */
}
[data-theme="light"] .role-member {
  color: #666 !important;
}

/* TIN NHáº®N CHAT (Light Mode - Fix lá»—i chá»¯ vÃ ng ná»n tráº¯ng) */
[data-theme="light"] .chat-msg:not(.me) .text {
  background-color: #e4e6eb !important;
  color: #050505 !important;
  font-weight: 500;
}
[data-theme="light"] .chat-msg.me .text {
  background-color: #0084ff !important;
  color: #ffffff !important;
}
[data-theme="light"] .chat-msg .author {
  color: #666 !important;
}

/* TIN NHáº®N Há»† THá»NG (Light Mode) */
[data-theme="light"] .chat-msg.system {
  color: #92400e !important; /* NÃ¢u Ä‘áº­m */
  background-color: #fef3c7 !important; /* VÃ ng nháº¡t */
  border: 1px solid #fcd34d !important;
  border-radius: 5px !important;
  padding: 5px 10px !important;
  font-weight: 600 !important;
  text-shadow: none !important; /* Bá» bÃ³ng chá»¯ */
  width: 90%;
  margin: 10px auto;
}

/* Ã” nháº­p liá»‡u (Light Mode) */
[data-theme="light"] .chat-input-area {
  background: #fff !important;
  border-top: 1px solid #ddd !important;
}
[data-theme="light"] #chatInput {
  background: #f0f2f5 !important;
  color: #000 !important;
  border: 1px solid #ccc !important;
}

/* --- FIX NÃšT LOGIN Bá»Š áº¨N NHáº¦M (QUAN TRá»ŒNG) --- */
/* Ã‰p hiá»ƒn thá»‹ láº¡i nÃºt Login ngay cáº£ khi nÃ³ dÃ­nh class .hidden */
#authContainer:has(#userMenuTrigger:not(.hidden)) #loginBtn.hidden {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  width: 30px !important;
  height: 30px !important;
  pointer-events: auto !important;
  cursor: pointer !important;
  position: static !important;
}
/* =================================================================
   MASTER FIX V9 (GRID SYSTEM - KHÃ”NG THá»‚ Vá»  GIAO DIá»†N)
   ================================================================= */

@media (max-width: 1024px) {
  /* --- 1. Cáº¤U HÃŒNH CHUNG --- */
  html,
  body {
    background: var(--bg-primary) !important;
    /* Reset láº¡i má»i thuá»™c tÃ­nh position cÃ³ thá»ƒ gÃ¢y lá»—i */
    position: static !important;
    width: 100% !important;
  }
  .party-container,
  .main-content {
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    max-width: none !important;
  }
  /* Äáº¢M Báº¢O .page KHÃ”NG Bá»Š NAV CHE - ÃP Dá»¤NG Má»ŒI ORIENTATION */
  .page {
    padding-top: 60px !important;
    min-height: 100vh !important;
    background: var(--bg-primary) !important;
  }
  #partyRoom.page {
    padding-top: 0 !important;
  }

  /* ============================================================
       MODE 1: Dá»ŒC (PORTRAIT) - CHá»ˆ Cáº¦N CUá»˜N ÄÆ¯á»¢C LÃ€ OK
       ============================================================ */
  @media (orientation: portrait) {
    /* XÃ“A KHOáº¢NG TRá»NG PHÃA TRÃŠN - Chá»‰ cáº§n Ä‘áº©y xuá»‘ng Ä‘Ãºng chiá»u cao nav */
    .page {
      padding-top: 60px !important;
      margin-top: 0 !important;
      min-height: 100vh !important;
      background: var(--bg-primary) !important;
    }
    #partyRoom.page {
      padding-top: 0 !important;
      margin-top: 0 !important;
      min-height: 80vh !important;
    }

    /* Máº¶C Äá»ŠNH: CÃC TRANG CUá»˜N BÃŒNH THÆ¯á»œNG */
    html,
    body {
      overflow-y: auto !important;
      overflow-x: hidden !important;
      height: auto !important;
      position: static !important;
      width: 100% !important;
    }
    /* CHá»ˆ KHÃ“A CUá»˜N KHI TRONG PHÃ’NG WATCH PARTY */
    body.watch-party-active {
      overflow: hidden !important;
      height: 100dvh !important;
      position: fixed !important;
      width: 100% !important;
    }

    #partyRoom {
      position: fixed !important;
      top: 60px !important; /* Ngay dÆ°á»›i thanh nav */
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      background: var(--bg-primary) !important;
      padding: 0 !important;
      margin: 0 !important;
      overflow: hidden !important;
      z-index: 100 !important;
    }

    /* CONTAINER CHÃNH - FLEX Dá»ŒC, FILL Háº¾T VIEWPORT */
    .room-layout {
      display: flex !important;
      flex-direction: column !important;
      grid-template-columns: none !important;
      width: 100% !important;
      height: 100% !important;
      gap: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* Header - Náº°M Äáº¦U TIÃŠN trong .room-main (flex column) */
    .room-header-bar {
      display: flex !important;
      flex-wrap: wrap !important;
      justify-content: center !important;
      align-items: center !important;
      background: var(--bg-secondary) !important;
      padding: 6px 10px !important;
      margin: 0 !important;
      border-radius: 0 !important;
      width: 100% !important;
      order: -1 !important; /* LuÃ´n Ä‘á»©ng Ä‘áº§u trong flex */
      z-index: 100 !important;
      position: relative !important;
      min-height: 40px !important;
      flex-shrink: 0 !important;
    }
    #roomTitleDisplay {
      width: 100% !important;
      text-align: center !important;
      order: -1 !important;
      font-weight: 700 !important;
      margin-bottom: 4px !important;
      font-size: 14px !important;
      color: var(--text-primary) !important;
      display: block !important;
    }
    .room-meta {
      display: flex !important;
      gap: 8px !important;
      justify-content: center !important;
    }

    /* Video Dá»c */
    .room-main,
    .party-main {
      width: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      background: var(--bg-primary) !important;
      position: relative !important;
      margin: 0 !important;
      padding: 0 !important;
      order: 2 !important;
      flex-shrink: 0 !important;
      /* KHÃ”NG dÃ¹ng aspect-ratio á»Ÿ Ä‘Ã¢y vÃ¬ #hostControls cÅ©ng náº±m trong room-main */
    }
    /* PLAYER WRAPPER - Tá»¶ Lá»† 16:9 */
    .room-player-wrapper {
      width: 100% !important;
      aspect-ratio: 16/9 !important;
      position: relative !important;
      flex-shrink: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
      border-radius: 0 !important;
      min-height: unset !important;
      height: auto !important;
      overflow: hidden !important;
      order: 1 !important; /* Sau header-bar */
    }
    #partyPlayer {
      width: 100% !important;
      height: 100% !important;
      display: block !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
    }

    /* Controls Dá»c - NGAY SAU VIDEO trong .room-main */
    #hostControls,
    .room-controls {
      width: 100% !important;
      overflow-x: auto !important;
      white-space: nowrap !important;
      background: var(--bg-secondary) !important;
      padding: 8px 10px !important;
      display: flex !important;
      gap: 8px !important;
      order: 2 !important; /* Sau player-wrapper(1) trong .room-main flex */
      flex-shrink: 0 !important;
      position: relative !important;
      transform: none !important;
      border-top: 1px solid var(--border-color) !important;
    }

    /* Chat Dá»c - FILL ÄÃšNG PHáº¦N CÃ’N Láº I GIá»®A CONTROLS VÃ€ INPUT */
    .room-sidebar,
    .party-sidebar {
      width: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      flex: 1 !important;
      min-height: 0 !important; /* Quan trá»ng: cho phÃ©p co láº¡i */
      background: var(--bg-primary) !important;
      border: none !important;
      border-radius: 0 !important;
      order: 4 !important;
      overflow: hidden !important;
      padding-bottom: 50px !important; /* Chá»«a chá»— cho chat-input fixed */
    }

    .room-tabs {
      height: 42px !important;
      min-height: 42px !important;
      background: var(--bg-secondary) !important;
      flex-shrink: 0 !important;
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      border-top: 2px solid #7c3aed !important;
      border-bottom: 1px solid var(--border-color) !important;
      z-index: 10 !important;
      position: relative !important;
    }
    .room-tab {
      flex: 1 !important;
      font-size: 14px !important;
      padding: 8px 14px !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      color: #999 !important;
      font-weight: 700 !important;
      background: transparent !important;
      border: none !important;
      border-bottom: 2px solid transparent !important;
      cursor: pointer !important;
    }
    .room-tab.active {
      color: #fff !important;
      border-bottom-color: #7c3aed !important;
      background: rgba(124, 58, 237, 0.1) !important;
    }
    #chatMessages,
    #memberList {
      flex: 1 !important;
      overflow-y: auto !important;
      padding: 10px !important;
      min-height: 0 !important; /* Quan trá»ng: cho phÃ©p co láº¡i trong flex */
    }
    /* Ã” nháº­p tin nháº¯n - Cá» Äá»ŠNH DÆ¯á»›I MÃ€N HÃŒNH MOBILE */
    .chat-input-area {
      position: fixed !important;
      bottom: 0 !important;
      left: 0 !important;
      right: 0 !important;
      padding: 8px 10px !important;
      background: var(--bg-secondary) !important;
      border-top: 1px solid var(--border-color) !important;
      z-index: 9500 !important;
      display: flex !important;
      align-items: center !important;
      gap: 6px !important;
    }
    .room-tab-content {
      display: none !important;
      flex-direction: column !important;
      flex: 1 !important;
      overflow: hidden !important;
    }
    .room-tab-content.active {
      display: flex !important;
    }
  }

  /* ============================================================
   FIX Lá»–I XOAY NGANG (MOBILE LANDSCAPE) - UPDATE
   ============================================================ */
  @media (max-width: 1024px) and (orientation: landscape) {
    /* 0. CHá»ˆ XÃ“A PADDING CHO WATCH PARTY (FULLSCREEN) */
    #partyRoom.page {
      padding-top: 0 !important;
      margin-top: 0 !important;
    }

    /* partyRoom chá»‰ fixed full mÃ n hÃ¬nh */
    #partyRoom {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      overflow: hidden !important;
      background: var(--bg-primary) !important;
      z-index: 9000 !important;
      padding: 0 !important;
      margin: 0 !important;
      display: block !important;
    }

    /* CONTAINER CHÃNH - GRID 75% VIDEO / 25% CHAT */
    .room-layout {
      display: grid !important;
      grid-template-columns: 75% 25% !important;
      width: 100% !important;
      height: 100% !important;
      gap: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* Cá»˜T TRÃI: VIDEO */
    .room-main,
    .party-main {
      grid-column: 1 !important;
      grid-row: 1 !important;
      width: 100% !important;
      height: 100% !important;
      position: relative !important;
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      overflow: hidden !important;
      background: var(--bg-primary) !important;
      max-height: 100vh !important;
      padding: 0 !important;
      margin: 0 !important;
      aspect-ratio: unset !important;
    }

    /* Video player - Láº¤P Äáº¦Y KHUNG */
    #partyPlayer {
      width: 100% !important;
      height: 100% !important;
      max-height: 100vh !important;
      object-fit: contain !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
    }

    /* Cá»˜T PHáº¢I: KHUNG CHAT 25% */
    .room-sidebar,
    .party-sidebar {
      grid-column: 2 !important;
      grid-row: 1 !important;
      width: 100% !important;
      height: 100% !important;
      max-height: 100vh !important;
      background: var(--bg-secondary) !important;
      border-left: 1px solid var(--border-color) !important;
      display: flex !important;
      flex-direction: column !important;
      z-index: 9100 !important;
      overflow: hidden !important;
      border-radius: 0 !important;
      min-height: unset !important;
      min-width: unset !important;
    }

    /* Header bar gá»n hÆ¡n */
    .room-header-bar {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      width: 100% !important;
      height: 32px !important;
      min-height: 32px !important;
      background: linear-gradient(
        to bottom,
        rgba(0, 0, 0, 0.95),
        rgba(0, 0, 0, 0.5)
      ) !important;
      padding: 2px 8px !important;
      justify-content: flex-start !important;
      align-items: center !important;
      gap: 6px !important;
      z-index: 9050 !important;
      pointer-events: none;
      flex-wrap: nowrap !important;
      margin: 0 !important;
    }
    .room-header-bar > * {
      pointer-events: auto !important;
      transform: scale(0.85);
    }
    .room-header-bar .btn {
      padding: 2px 8px !important;
      font-size: 10px !important;
    }
    #roomTitleDisplay {
      font-size: 11px !important;
      margin: 0 4px !important;
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
      max-width: 100px !important;
      display: block !important;
    }
    .room-meta {
      display: flex !important;
      gap: 4px !important;
      align-items: center !important;
    }
    .room-meta .btn {
      padding: 2px 6px !important;
      font-size: 9px !important;
    }
    .live-badge {
      font-size: 8px !important;
      padding: 1px 4px !important;
    }

    /* Video container */
    .room-player-wrapper {
      width: 100% !important;
      height: 100% !important;
      min-height: unset !important;
      margin: 0 !important;
      padding: 0 !important;
      position: relative !important;
      top: 0 !important;
      left: 0 !important;
      border-radius: 0 !important;
    }

    /* Chat tabs - hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ */
    .room-tabs {
      height: 30px !important;
      flex-shrink: 0 !important;
      display: flex !important;
    }
    .room-tab {
      font-size: 11px !important;
      padding: 0 6px !important;
      display: flex !important;
      align-items: center !important;
    }
    #chatMessages {
      font-size: 11px !important;
      flex: 1 !important;
      overflow-y: auto !important;
      min-height: 0 !important;
    }

    /* Chat input - TRONG SIDEBAR, KHÃ”NG FIXED */
    .chat-input-area {
      position: static !important;
      padding: 8px !important;
      background: var(--bg-secondary) !important;
      border-top: 1px solid var(--border-color) !important;
      flex-shrink: 0 !important;
      display: flex !important;
      align-items: center !important;
      gap: 6px !important;
    }
    .chat-input-area input {
      flex: 1 !important;
      min-width: 0 !important;
      padding: 6px 10px !important;
      font-size: 12px !important;
    }
    .chat-input-area button {
      width: 30px !important;
      height: 30px !important;
      flex-shrink: 0 !important;
    }

    /* NÃšT ÄIá»€U KHIá»‚N - TO HÆ N VÃ€ Vá»Š TRÃ Há»¢P LÃ */
    #hostControls,
    .room-controls {
      position: absolute !important;
      bottom: 8px !important;
      left: 50% !important;
      transform: translateX(-50%) scale(0.85) !important;
      width: auto !important;
      min-width: 50% !important;
      max-width: 70% !important;
      background: rgba(0, 0, 0, 0.9) !important;
      border-radius: 25px !important;
      padding: 6px 16px !important;
      gap: 8px !important;
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      white-space: nowrap !important;
      z-index: 9050 !important;
      margin: 0 !important;
    }

    /* NÃºt báº¥m Ä‘iá»u khiá»ƒn - TO HÆ N */
    #hostControls button,
    .room-controls button {
      padding: 6px 14px !important;
      font-size: 12px !important;
      height: 32px !important;
      min-width: unset !important;
    }
  }

  /* Fix nÃºt Login */
  #authContainer #loginBtn.hidden {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    position: static !important;
  }
}