<!-- ADMIN PAGE -->
<div id="adminPage" class="page">
  <div class="admin-layout">
    <!-- Admin Sidebar -->
    <aside class="admin-sidebar" id="adminSidebar">
      <nav class="admin-nav">
        <div
          class="admin-nav-item active"
          data-panel="dashboard"
          onclick="showAdminPanel('dashboard')"
        >
          <i class="fas fa-chart-line"></i>
          <span>Dashboard</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="movies"
          onclick="showAdminPanel('movies')"
        >
          <i class="fas fa-film"></i>
          <span>Qu·∫£n l√Ω Phim</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="episodes"
          onclick="showAdminPanel('episodes')"
        >
          <i class="fas fa-list-ol"></i>
          <span>Qu·∫£n l√Ω T·∫≠p</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="categories"
          onclick="showAdminPanel('categories')"
        >
          <i class="fas fa-tags"></i>
          <span>Th·ªÉ lo·∫°i</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="countries"
          onclick="showAdminPanel('countries')"
        >
          <i class="fas fa-globe"></i>
          <span>Qu·ªëc gia</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="actors"
          onclick="showAdminPanel('actors')"
        >
          <i class="fas fa-user-tie"></i>
          <span>Di·ªÖn vi√™n</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="users"
          onclick="showAdminPanel('users')"
        >
          <i class="fas fa-users"></i>
          <span>Ng∆∞·ªùi d√πng</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="comments"
          onclick="showAdminPanel('comments')"
        >
          <i class="fas fa-comments"></i>
          <span>B√¨nh lu·∫≠n</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="transactions"
          onclick="showAdminPanel('transactions')"
        >
          <i class="fas fa-exchange-alt"></i>
          <span>Giao d·ªãch</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="notifications"
          onclick="showAdminPanel('notifications')"
        >
          <i class="fas fa-bell" style="color: #4db8ff;"></i>
          <span>Th√¥ng b√°o</span>
        </div>
        <div
          class="admin-nav-item"
          id="adminNavVipRequests"
          data-panel="vipRequests"
          onclick="showAdminPanel('vipRequests')"
        >
          <i class="fas fa-star" style="color: var(--warning-color, #ffc107);"></i>
          <span>Y√™u C·∫ßu VIP</span>
        </div>
        <div
          class="admin-nav-item"
          data-panel="errorReports"
          onclick="showAdminPanel('errorReports')"
        >
          <i class="fas fa-exclamation-triangle" style="color: #ff6b6b;"></i>
          <span>B√°o L·ªói</span>
        </div>
      </nav>
    </aside>

    <!-- Admin Content -->
    <div class="admin-content">
      <!-- Dashboard Panel -->
      <div class="admin-panel active" id="dashboardPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Dashboard</h2>
          <span class="text-muted">T·ªïng quan h·ªá th·ªëng</span>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon movies">
              <i class="fas fa-film"></i>
            </div>
            <div class="stat-info">
              <h3 id="statTotalMovies">0</h3>
              <p>T·ªïng s·ªë phim</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon views">
              <i class="fas fa-eye"></i>
            </div>
            <div class="stat-info">
              <h3 id="statTotalViews">0</h3>
              <p>T·ªïng l∆∞·ª£t xem</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon revenue">
              <i class="fas fa-coins"></i>
            </div>
            <div class="stat-info">
              <h3 id="statTotalRevenue">0 CRO</h3>
              <p>Doanh thu ∆∞·ªõc t√≠nh</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon users">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-info">
              <h3 id="statTotalUsers">0</h3>
              <p>T·ªïng ng∆∞·ªùi d√πng</p>
            </div>
          </div>
        </div>

        <!-- Recent Movies -->
        <div class="mt-3">
          <h3>Phim m·ªõi th√™m g·∫ßn ƒë√¢y</h3>
          <table class="admin-table mt-2">
            <thead>
              <tr>
                <th>Poster</th>
                <th>T√™n phim</th>
                <th>Gi√°</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Ng√†y t·∫°o</th>
              </tr>
            </thead>
            <tbody id="recentMoviesTable">
              <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Movies Panel -->
      <div class="admin-panel" id="moviesPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Phim</h2>
          <div class="header-actions">
            <button class="btn btn-secondary" onclick="syncAllMoviesActors()" title="ƒê·ªìng b·ªô ID di·ªÖn vi√™n cho to√†n b·ªô phim">
              <i class="fas fa-sync-alt"></i> ƒê·ªìng b·ªô Di·ªÖn vi√™n
            </button>
            <button class="btn btn-primary" onclick="openMovieModal()">
              <i class="fas fa-plus"></i> Th√™m phim m·ªõi
            </button>
          </div>
        </div>

        <div class="movie-filter-grid">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchMovies"
              placeholder="T√¨m ki·∫øm phim..."
              oninput="filterAdminMovies()"
            />
          </div>
          <select class="form-select" id="adminSortMovies" onchange="filterAdminMovies()">
            <option value="newest">M·ªõi nh·∫•t</option>
            <option value="oldest">C≈© nh·∫•t</option>
          </select>
          <select class="form-select" id="adminFilterMovieType" onchange="filterAdminMovies()">
            <option value="">T·∫•t c·∫£ lo·∫°i</option>
            <option value="single">Phim l·∫ª</option>
            <option value="series">Phim b·ªô</option>
          </select>
          <select class="form-select" id="adminFilterMovieCategory" onchange="filterAdminMovies()">
            <option value="">T·∫•t c·∫£ th·ªÉ lo·∫°i</option>
            <!-- S·∫Ω ƒë∆∞·ª£c load ƒë·ªông c√°c th·ªÉ lo·∫°i c√≥ phim -->
          </select>
          <select class="form-select" id="adminFilterCountry" onchange="filterAdminMovies()">
            <option value="">T·∫•t c·∫£ qu·ªëc gia</option>
            <!-- S·∫Ω ƒë∆∞·ª£c load ƒë·ªông theo s·ªë l∆∞·ª£ng phim -->
          </select>
          <select class="form-select" id="adminFilterStatus" onchange="filterAdminMovies()">
            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
            <option value="public">C√¥ng khai</option>
            <option value="hidden">·∫®n</option>
            <option value="pending">Ch·ªù duy·ªát</option>
          </select>
        </div>

        <!-- Th·ªëng k√™ phim -->
        <div class="admin-movie-stats mb-3" style="display: flex; gap: 20px; font-size: 0.9rem; color: var(--text-muted);">
            <div id="statMoviesTotal">T·ªïng: 0</div>
            <div id="statMoviesSingle" style="color: #4dabf7;">Phim l·∫ª: 0</div>
            <div id="statMoviesSeries" style="color: #da77f2;">Phim b·ªô: 0</div>
        </div>

        <table class="admin-table">
          <thead>
            <tr>
              <th>Poster</th>
              <th>T√™n phim</th>
              <th>Qu·ªëc gia</th>
              <th>Ph√¢n lo·∫°i</th>
              <th>Th·ªÉ lo·∫°i</th>
              <th>T√¨nh tr·∫°ng</th>
              <th>Gi√° (CRO)</th>
              <th>L∆∞·ª£t xem</th>
              <th>Tr·∫°ng th√°i</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="adminMoviesTable">
            <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
          </tbody>
        </table>
      </div>

      <!-- Episodes Panel -->
      <div class="admin-panel" id="episodesPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω T·∫≠p Phim</h2>
        </div>

        <div class="form-group">
          <label class="form-label">Ch·ªçn phim:</label>

          <div style="position: relative; margin-bottom: 10px">
            <i
              class="fas fa-search"
              style="position: absolute; left: 10px; top: 10px; color: #888"
            ></i>
            <input
              type="text"
              class="form-input"
              id="episodeMovieSearch"
              placeholder="G√µ t√™n phim ƒë·ªÉ l·ªçc nhanh..."
              oninput="filterEpisodeMovies()"
              style="padding-left: 35px"
            />
          </div>

          <div style="display: flex; gap: 8px; margin-bottom: 10px;">
            <select class="form-select" id="episodeMovieSort" onchange="filterEpisodeMovies()" style="flex: 1;">
              <option value="newest">M·ªõi nh·∫•t</option>
              <option value="oldest">C≈© nh·∫•t</option>
            </select>
            <select class="form-select" id="episodeMovieAlphabet" onchange="filterEpisodeMovies()" style="flex: 1;">
              <option value="">Ch·ªØ c√°i (T·∫•t c·∫£)</option>
              <option value="A-D">V·∫ßn A - D</option>
              <option value="E-H">V·∫ßn E - H</option>
              <option value="I-L">V·∫ßn I - L</option>
              <option value="M-P">V·∫ßn M - P</option>
              <option value="Q-T">V·∫ßn Q - T</option>
              <option value="U-Z">V·∫ßn U - Z</option>
              <option value="others">Kh√°c (S·ªë...)</option>
            </select>
          </div>
          <select
            class="form-select"
            id="selectMovieForEpisodes"
            onchange="loadEpisodesForMovie()"
          >
            <option value="">-- Ch·ªçn phim --</option>
          </select>
        </div>

        <div id="episodesManagement" class="hidden">
          <!-- Thanh T·ªïng s·ªë t·∫≠p -->
          <div style="display: flex; align-items: center; gap: 12px; background: rgba(78, 205, 196, 0.08); border: 1px solid rgba(78, 205, 196, 0.3); border-radius: 8px; padding: 12px 16px; margin-bottom: 16px; flex-wrap: wrap;">
            <div style="display: flex; align-items: center; gap: 8px;">
              <i class="fas fa-layer-group" style="color: #4ecdc4;"></i>
              <label style="font-weight: 600; white-space: nowrap;">T·ªïng s·ªë t·∫≠p:</label>
            </div>
            <input type="number" class="form-input" id="totalEpisodesInput" min="0" placeholder="VD: 16" 
              style="width: 90px; text-align: center; padding: 6px 10px;">
            <button class="btn btn-sm" style="background: #4ecdc4; color: #fff; border: none; padding: 6px 14px; border-radius: 6px;" onclick="saveTotalEpisodes()">
              <i class="fas fa-save"></i> L∆∞u
            </button>
            <span id="episodeStatusBadge" style="margin-left: auto; font-size: 0.85rem; font-weight: 600; padding: 4px 12px; border-radius: 6px; background: rgba(255,255,255,0.08);"></span>
          </div>

          <div class="flex-between mb-3">
            <h3>Danh s√°ch t·∫≠p</h3>
            <div style="display: flex; gap: 8px;">
              <button class="btn btn-danger" onclick="deleteAllEpisodes()">
                <i class="fas fa-trash-alt"></i> X√≥a t·∫•t c·∫£ t·∫≠p
              </button>
              <button class="btn btn-success" onclick="openImportEpisodesModal()">
                <i class="fas fa-file-import"></i> Th√™m nhi·ªÅu t·∫≠p (API)
              </button>
              <button class="btn btn-primary" onclick="openEpisodeModal()">
                <i class="fas fa-plus"></i> Th√™m t·∫≠p m·ªõi
              </button>
            </div>
          </div>

          <table class="admin-table">
            <thead>
              <tr>
                <th>T·∫≠p</th>
                <th>YouTube ID</th>
                <th>Th·ªùi l∆∞·ª£ng</th>
                <th>Ch·∫•t l∆∞·ª£ng</th>
                <th>Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="adminEpisodesTable">
              <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Categories Panel -->
      <div class="admin-panel" id="categoriesPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Th·ªÉ Lo·∫°i</h2>
          <button class="btn btn-primary" onclick="openCategoryModal()">
            <i class="fas fa-plus"></i> Th√™m th·ªÉ lo·∫°i
          </button>
        </div>

        <div class="search-filter mb-3">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchCategory"
              placeholder="T√¨m th·ªÉ lo·∫°i, slug, ID..."
              oninput="renderAdminCategories()"
            />
          </div>
        </div>

        <table class="admin-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>T√™n th·ªÉ lo·∫°i</th>
              <th>Slug</th>
              <th>S·ªë phim</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="adminCategoriesTable">
            <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
          </tbody>
        </table>
      </div>

      <!-- Countries Panel -->
      <div class="admin-panel" id="countriesPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Qu·ªëc Gia</h2>
          <button class="btn btn-primary" onclick="openCountryModal()">
            <i class="fas fa-plus"></i> Th√™m Qu·ªëc Gia
          </button>
        </div>

        <div class="search-filter mb-3">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchCountry"
              placeholder="T√¨m t√™n qu·ªëc gia, m√£ code..."
              oninput="renderAdminCountries()"
            />
          </div>
        </div>

        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th style="width: 50px">STT</th>
                <th>ID</th>
                <th>T√™n Qu·ªëc Gia</th>
                <th>M√£ (Code)</th>
                <th style="width: 120px">Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="adminCountriesTable"></tbody>
          </table>
        </div>
      </div>

      <!-- Actors Panel -->
      <div class="admin-panel" id="actorsPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Di·ªÖn Vi√™n</h2>
          <div style="display: flex; gap: 8px;">
            <button class="btn btn-success" onclick="toggleActorApiImport()">
              <i class="fas fa-cloud-download-alt"></i> Import t·ª´ API
            </button>
            <button class="btn btn-primary" onclick="openActorModal()">
              <i class="fas fa-plus"></i> Th√™m Di·ªÖn Vi√™n
            </button>
          </div>
        </div>

        <!-- Khung Import Di·ªÖn Vi√™n t·ª´ OPhim API -->
        <div id="actorApiImportBox" style="display: none; background: rgba(81, 207, 102, 0.08); border: 1px dashed #51cf66; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
            <label class="form-label" style="color: #51cf66; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-users"></i> Import di·ªÖn vi√™n & ƒë·∫°o di·ªÖn t·ª´ OPhim (TMDB)
            </label>
            <div style="display: flex; gap: 10px;">
                <input type="text" class="form-input" id="actorApiSlugInput" placeholder="Nh·∫≠p slug phim (VD: tieng-yeu-nay-anh-dich-duoc-khong)" style="flex: 1;">
                <button type="button" class="btn btn-success" onclick="fetchActorsFromAPI()" style="white-space: nowrap;">
                    <i class="fas fa-search"></i> Qu√©t di·ªÖn vi√™n
                </button>
            </div>
            <small class="text-muted" style="display: block; margin-top: 8px; font-size: 0.8rem;">
                * Nh·∫≠p slug phim t·ª´ OPhim. H·ªá th·ªëng s·∫Ω qu√©t danh s√°ch di·ªÖn vi√™n v√† ƒë·∫°o di·ªÖn, so s√°nh v·ªõi kho hi·ªán t·∫°i, v√† t·ª± ƒë·ªông th√™m nh·ªØng ng∆∞·ªùi ch∆∞a c√≥.
            </small>
            <div id="actorApiImportResults" style="margin-top: 12px;"></div>
        </div>

        <!-- Khung Import Di·ªÖn Vi√™n t·ª´ RapChieuPhim API -->
        <div id="rapActorApiImportBox" style="display: none; background: rgba(255, 107, 107, 0.08); border: 1px dashed #ff6b6b; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
            <label class="form-label" style="color: #ff6b6b; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-film"></i> Import di·ªÖn vi√™n t·ª´ RapChieuPhim.com
            </label>
            <div style="display: flex; gap: 10px; margin-bottom: 8px;">
                <input type="text" class="form-input" id="rapApiKeyInput" placeholder="Nh·∫≠p API Key (x-api-key)" style="flex: 1;">
                <button type="button" class="btn btn-secondary" onclick="copyRapApiKey()" title="Sao ch√©p Key" style="padding: 10px 15px;">
                    <i class="fas fa-copy"></i>
                </button>
                <button type="button" class="btn btn-primary" onclick="saveRapApiKey()" title="L∆∞u Key" style="padding: 10px 15px;">
                    <i class="fas fa-save"></i> L∆∞u Key
                </button>
            </div>
            <div style="display: flex; gap: 10px;">
                <input type="number" class="form-input" id="rapApiPageInput" placeholder="Trang (m·∫∑c ƒë·ªãnh: 1)" style="width: 120px;" value="1" min="1">
                <button type="button" class="btn" style="background: #ff6b6b; color: #fff; white-space: nowrap;" onclick="fetchActorsFromRapChieuPhim()">
                    <i class="fas fa-download"></i> Import di·ªÖn vi√™n
                </button>
            </div>
            <small class="text-muted" style="display: block; margin-top: 8px; font-size: 0.8rem;">
                * Nh·∫≠p API Key t·ª´ rapchieuphim.com/api/key. H·ªá th·ªëng s·∫Ω l·∫•y danh s√°ch di·ªÖn vi√™n v√† t·ª± ƒë·ªông th√™m m·ªõi v√†o kho.
            </small>
            <div id="rapActorApiImportResults" style="margin-top: 12px;"></div>
        </div>

        <div class="search-filter mb-3">
          <div class="search-box" style="flex: 1;">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchActor"
              placeholder="T√¨m t√™n di·ªÖn vi√™n..."
              oninput="renderAdminActors()"
            />
          </div>
          <select class="form-select" id="adminSortActor" onchange="renderAdminActors()" style="width: 200px;">
            <option value="newest">M·ªõi nh·∫•t</option>
            <option value="oldest">C≈© nh·∫•t</option>
            <option value="az">T√™n A-Z</option>
            <option value="za">T√™n Z-A</option>
          </select>
        </div>

        <!-- Thanh H√†nh ƒë·ªông h√†ng lo·∫°t (Bulk Actions) -->
        <div id="actorBulkActionsBar" class="bulk-actions-bar">
          <div class="bulk-info">
            <span class="selected-count">ƒê√£ ch·ªçn: <strong id="selectedActorsCount">0</strong></span>
            <button class="btn btn-sm btn-secondary" onclick="clearActorSelection()">B·ªè ch·ªçn</button>
          </div>
          <div class="bulk-buttons">
            <button class="btn btn-sm btn-primary" onclick="openBulkUpdateModal('gender')">
              <i class="fas fa-venus-mars"></i> ƒê·ªïi Gi·ªõi t√≠nh
            </button>
            <button class="btn btn-sm btn-primary" onclick="openBulkUpdateModal('country')">
              <i class="fas fa-globe"></i> ƒê·ªïi N∆°i s·ªëng
            </button>
            <button class="btn btn-sm btn-danger" onclick="deleteSelectedActors()">
              <i class="fas fa-trash-alt"></i> X√≥a ƒë√£ ch·ªçn
            </button>
          </div>
        </div>

        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th style="width: 40px">
                  <input type="checkbox" id="selectAllActors" onclick="toggleSelectAllActors(this.checked)" />
                </th>
                <th style="width: 50px">STT</th>
                <th>H√¨nh ·∫¢nh</th>
                <th>T√™n</th>
                <th>Vai tr√≤</th>
                <th>Gi·ªõi t√≠nh</th>
                <th>Ng√†y sinh</th>
                <th>N∆°i s·ªëng</th>
                <th style="width: 120px">Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="adminActorsTable"></tbody>
          </table>
        </div>
      </div>

      <!-- Users Panel -->
      <div class="admin-panel" id="usersPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Ng∆∞·ªùi D√πng</h2>
        </div>

        <div class="search-filter mb-3">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchUsers"
              placeholder="T√¨m ki·∫øm ng∆∞·ªùi d√πng..."
            />
          </div>
          <select class="form-select" id="adminFilterRole">
            <option value="">T·∫•t c·∫£ vai tr√≤</option>
            <option value="admin">Admin</option>
            <option value="editor">Editor</option>
            <option value="user">User</option>
          </select>
        </div>

        <table class="admin-table">
          <thead>
            <tr>
              <th>Avatar</th>
              <th>Email</th>
              <th>T√™n</th>
              <th>Vai tr√≤</th>
              <th>Tr·∫°ng th√°i</th>
              <th>G√≥i (VIP)</th>
              <th>Th·ªùi h·∫°n</th>
              <th>Ng√†y t·∫°o</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="adminUsersTable"></tbody>
        </table>
      </div>

      <!-- Comments Panel -->
      <div class="admin-panel" id="commentsPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω B√¨nh Lu·∫≠n</h2>
        </div>

        <div class="search-filter mb-3">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchComments"
              placeholder="T√¨m n·ªôi dung, ng∆∞·ªùi d√πng, t√™n phim..."
              oninput="filterAdminComments()"
            />
          </div>
          <select class="form-select" id="adminFilterCommentRating" onchange="filterAdminComments()">
            <option value="">T·∫•t c·∫£ ƒë√°nh gi√°</option>
            <option value="10">10 Sao (Tuy·ªát ƒë·ªânh)</option>
            <option value="9">9 Sao (Xu·∫•t s·∫Øc)</option>
            <option value="8">8 Sao (R·∫•t t·ªët)</option>
            <option value="7">7 Sao (T·ªët)</option>
            <option value="6">6 Sao (Kh√°)</option>
            <option value="5">5 Sao (Trung b√¨nh)</option>
            <option value="4">4 Sao (H∆°i t·ªá)</option>
            <option value="3">3 Sao (T·ªá)</option>
            <option value="2">2 Sao (R·∫•t t·ªá)</option>
            <option value="1">1 Sao (Th·∫£m h·ªça)</option>
          </select>
        </div>

        <table class="admin-table">
          <thead>
            <tr>
              <th>Ng∆∞·ªùi d√πng</th>
              <th>Phim</th>
              <th>N·ªôi dung</th>
              <th>ƒê√°nh gi√°</th>
              <th>Th·ªùi gian</th>
              <th>Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="adminCommentsTable">
            <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
          </tbody>
        </table>
      </div>

      <!-- Transactions Panel -->
      <div class="admin-panel" id="transactionsPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">L·ªãch S·ª≠ Giao D·ªãch</h2>
        </div>

        <table class="admin-table">
          <thead>
            <tr>
              <th>TX Hash</th>
              <th>Ng∆∞·ªùi d√πng</th>
              <th>Phim</th>
              <th>S·ªë ti·ªÅn</th>
              <th>Tr·∫°ng th√°i</th>
              <th>Th·ªùi gian</th>
            </tr>
          </thead>
          <tbody id="adminTransactionsTable">
            <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
          </tbody>
        </table>
      </div>

      <!-- Notifications Management Panel -->
      <div class="admin-panel" id="notificationsPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Th√¥ng b√°o</h2>
        </div>

        <!-- Form g·ª≠i th√¥ng b√°o m·ªõi -->
        <div class="admin-notif-send-box">
          <h3 style="margin-bottom: 15px; font-size: 1.1rem;"><i class="fas fa-paper-plane" style="color: #4db8ff;"></i> G·ª≠i th√¥ng b√°o m·ªõi</h3>
          <div class="form-group">
            <label class="form-label">Ti√™u ƒë·ªÅ th√¥ng b√°o</label>
            <input type="text" class="form-input" id="adminNotifTitle" placeholder="VD: Phim m·ªõi c·∫≠p nh·∫≠t tu·∫ßn n√†y..." />
          </div>
          <div class="form-group">
            <label class="form-label">N·ªôi dung chi ti·∫øt</label>
            <textarea class="form-textarea" id="adminNotifMessage" placeholder="Nh·∫≠p n·ªôi dung th√¥ng b√°o g·ª≠i t·ªõi t·∫•t c·∫£ ng∆∞·ªùi d√πng..." style="min-height: 80px;"></textarea>
          </div>
          <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
            <div class="form-group" style="margin-bottom: 0; flex: 1; min-width: 150px;">
              <label class="form-label">Lo·∫°i th√¥ng b√°o</label>
              <select class="form-select" id="adminNotifType">
                <option value="system">üîî H·ªá th·ªëng</option>
                <option value="new_movie">üé¨ Phim m·ªõi</option>
                <option value="promotion">üéÅ Khuy·∫øn m√£i</option>
                <option value="maintenance">üîß B·∫£o tr√¨</option>
              </select>
            </div>
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">&nbsp;</label>
              <button class="btn btn-primary" onclick="adminSendNotifToAll()" style="white-space: nowrap;">
                <i class="fas fa-paper-plane"></i> G·ª≠i t·ªõi t·∫•t c·∫£ Users
              </button>
            </div>
          </div>
        </div>

        <!-- L·∫≠p l·ªãch th√¥ng b√°o t·ª± ƒë·ªông -->
        <div class="admin-notif-schedule-box">
          <h3 style="margin-bottom: 15px; font-size: 1.1rem;">
            <i class="fas fa-clock" style="color: #ffc107;"></i> L·∫≠p l·ªãch g·ª≠i th√¥ng b√°o t·ª± ƒë·ªông
          </h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
            <div class="form-group">
              <label class="form-label">Ti√™u ƒë·ªÅ th√¥ng b√°o</label>
              <input type="text" class="form-input" id="schedNotifTitle" placeholder="VD: Phim hot cu·ªëi tu·∫ßn..." />
            </div>
            <div class="form-group">
              <label class="form-label">Lo·∫°i th√¥ng b√°o</label>
              <select class="form-select" id="schedNotifType">
                <option value="system">üîî H·ªá th·ªëng</option>
                <option value="new_movie">üé¨ Phim m·ªõi</option>
                <option value="promotion">üéÅ Khuy·∫øn m√£i</option>
                <option value="maintenance">üîß B·∫£o tr√¨</option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">N·ªôi dung chi ti·∫øt</label>
            <textarea class="form-textarea" id="schedNotifMessage" placeholder="Nh·∫≠p n·ªôi dung th√¥ng b√°o..." style="min-height: 60px;"></textarea>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 12px; align-items: end;">
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">üìÖ Ng√†y g·ª≠i</label>
              <input type="date" class="form-input" id="schedNotifDate" />
            </div>
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">‚è∞ Gi·ªù g·ª≠i</label>
              <input type="time" class="form-input" id="schedNotifTime" />
            </div>
            <div class="form-group" style="margin-bottom: 0;">
              <label class="form-label">üîÑ L·∫∑p l·∫°i</label>
              <select class="form-select" id="schedNotifRepeat">
                <option value="once">M·ªôt l·∫ßn</option>
                <option value="daily">H√†ng ng√†y</option>
                <option value="weekly">H√†ng tu·∫ßn</option>
                <option value="monthly">H√†ng th√°ng</option>
              </select>
            </div>
            <div>
              <button class="btn btn-warning" onclick="adminCreateScheduledNotif()" style="white-space: nowrap; height: 42px;">
                <i class="fas fa-calendar-plus"></i> T·∫°o l·ªãch
              </button>
            </div>
          </div>
        </div>

        <!-- B·∫£ng l·ªãch h·∫πn ƒë√£ t·∫°o -->
        <div style="margin-top: 20px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h3 style="font-size: 1.05rem; margin: 0;">
              <i class="fas fa-calendar-alt" style="color: #ffc107;"></i> Danh s√°ch l·ªãch h·∫πn
              <span class="admin-notif-stat" style="margin-left: 8px; font-size: 0.8rem;">
                <strong id="schedStatTotal">0</strong> l·ªãch
              </span>
            </h3>
            <button class="btn btn-danger btn-sm" onclick="adminDeleteAllScheduled()" style="font-size: 0.8rem;">
              <i class="fas fa-trash-alt"></i> X√≥a t·∫•t c·∫£ l·ªãch
            </button>
          </div>
          <div class="table-responsive">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Lo·∫°i</th>
                  <th>Ti√™u ƒë·ªÅ</th>
                  <th>N·ªôi dung</th>
                  <th>Ng√†y gi·ªù g·ª≠i</th>
                  <th>L·∫∑p l·∫°i</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th style="min-width: 100px;">Thao t√°c</th>
                </tr>
              </thead>
              <tbody id="adminScheduledTable">
                <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- NgƒÉn c√°ch 2 ph·∫ßn -->
        <hr style="border-color: rgba(255,255,255,0.08); margin: 30px 0 20px;">
        <h3 style="font-size: 1.05rem; margin-bottom: 15px;">
          <i class="fas fa-history" style="color: #4db8ff;"></i> L·ªãch s·ª≠ th√¥ng b√°o ƒë√£ g·ª≠i
        </h3>

        <!-- B·ªô l·ªçc -->
        <div class="search-filter mb-3" style="margin-top: 25px;">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchNotif"
              placeholder="T√¨m ti√™u ƒë·ªÅ, n·ªôi dung th√¥ng b√°o..."
              oninput="filterAdminNotifications()"
            />
          </div>
          <select class="form-select" id="adminFilterNotifType" onchange="filterAdminNotifications()">
            <option value="">T·∫•t c·∫£ lo·∫°i</option>
            <option value="system">üîî H·ªá th·ªëng</option>
            <option value="new_movie">üé¨ Phim m·ªõi</option>
            <option value="promotion">üéÅ Khuy·∫øn m√£i</option>
            <option value="maintenance">üîß B·∫£o tr√¨</option>
            <option value="vip_approved">‚úÖ VIP ƒë√£ duy·ªát</option>
            <option value="vip_request">‚≠ê Y√™u c·∫ßu VIP</option>
          </select>
        </div>

        <!-- Th·ªëng k√™ -->
        <div style="display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
          <span class="admin-notif-stat"><i class="fas fa-list"></i> T·ªïng: <strong id="notifStatTotal">0</strong></span>
          <span class="admin-notif-stat"><i class="fas fa-envelope"></i> Ch∆∞a ƒë·ªçc: <strong id="notifStatUnread" style="color: #ff6b6b;">0</strong></span>
          <span class="admin-notif-stat"><i class="fas fa-envelope-open"></i> ƒê√£ ƒë·ªçc: <strong id="notifStatRead" style="color: #51cf66;">0</strong></span>
        </div>

        <!-- N√∫t h√†nh ƒë·ªông h√†ng lo·∫°t -->
        <div style="margin-bottom: 15px; display: flex; gap: 10px;">
          <button class="btn btn-danger btn-sm" onclick="adminDeleteAllNotifications()">
            <i class="fas fa-trash-alt"></i> X√≥a t·∫•t c·∫£ th√¥ng b√°o
          </button>
        </div>

        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Lo·∫°i</th>
                <th>Ti√™u ƒë·ªÅ</th>
                <th>N·ªôi dung</th>
                <th>Ng∆∞·ªùi nh·∫≠n</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Th·ªùi gian</th>
                <th style="min-width: 80px;">Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="adminNotificationsTable">
              <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- VIP Requests Panel -->
      <div class="admin-panel" id="vipRequestsPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω Y√™u C·∫ßu N√¢ng VIP</h2>
        </div>

        <div class="search-filter mb-3" style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center;">
          <div class="search-box" style="flex: 1; min-width: 250px;">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchVip"
              placeholder="T√¨m ki·∫øm theo Email ng∆∞·ªùi d√πng..."
              oninput="filterAdminVipRequests()"
            />
          </div>
          
          <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
             <div class="form-group" style="margin-bottom: 0;">
                <label style="font-size: 0.9rem; margin-right: 5px;">T·ª´ ng√†y:</label>
                <input type="date" id="vipFilterStartDate" class="form-input" style="padding: 8px; width: auto;" onchange="filterAdminVipRequests()">
             </div>
             <div class="form-group" style="margin-bottom: 0;">
                <label style="font-size: 0.9rem; margin-right: 5px;">ƒê·∫øn ng√†y:</label>
                <input type="date" id="vipFilterEndDate" class="form-input" style="padding: 8px; width: auto;" onchange="filterAdminVipRequests()">
             </div>
             
             <select class="form-select" id="vipSortOrder" onchange="filterAdminVipRequests()" style="min-width: 150px;">
                <option value="desc">M·ªõi nh·∫•t tr∆∞·ªõc</option>
                <option value="asc">C≈© nh·∫•t tr∆∞·ªõc</option>
             </select>

             <select class="form-select" id="vipFilterStatus" onchange="filterAdminVipRequests()" style="min-width: 150px;">
               <option value="pending">ƒêang ch·ªù duy·ªát</option>
               <option value="approved">ƒê√£ duy·ªát</option>
               <option value="rejected">ƒê√£ t·ª´ ch·ªëi</option>
               <option value="">T·∫•t c·∫£</option>
             </select>
          </div>
        </div>

        <div class="table-responsive">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>N·ªôi dung chuy·ªÉn</th>
                  <th>G√≥i Y√™u C·∫ßu</th>
                  <th>S·ªë Ti·ªÅn</th>
                  <th>·∫¢nh Bi√™n Lai (Bill)</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>Th·ªùi gian</th>
                  <th style="min-width: 160px; text-align: center;">Thao t√°c</th>
                </tr>
              </thead>
              <tbody id="adminVipRequestsTable">
                <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
              </tbody>
            </table>
        </div>
      </div>

      <!-- Error Reports Panel -->
      <div class="admin-panel" id="errorReportsPanel">
        <div class="admin-panel-header">
          <h2 class="admin-panel-title">Qu·∫£n l√Ω B√°o L·ªói</h2>
        </div>

        <div class="search-filter mb-3" style="display: flex; gap: 15px; align-items: center;">
          <div class="search-box" style="flex: 1;">
            <i class="fas fa-search"></i>
            <input
              type="text"
              class="form-input"
              id="adminSearchError"
              placeholder="T√¨m ki·∫øm theo t√™n phim, t·∫≠p phim ho·∫∑c email ng∆∞·ªùi b√°o..."
              oninput="filterErrorReports()"
            />
          </div>
          <select class="form-select" id="errorFilterType" onchange="filterErrorReports()" style="min-width: 150px;">
            <option value="">T·∫•t c·∫£ lo·∫°i l·ªói</option>
            <option value="load_slow">Video gi·∫≠t lag / Load ch·∫≠m</option>
            <option value="broken_link">Kh√¥ng xem ƒë∆∞·ª£c / B·ªã l·ªói Play</option>
            <option value="subtitle_error">L·ªói ph·ª• ƒë·ªÅ</option>
            <option value="audio_error">L·ªói √¢m thanh</option>
            <option value="wrong_movie">Sai phim / Sai t·∫≠p</option>
            <option value="other">L·ªói kh√°c</option>
          </select>
          <select class="form-select" id="errorFilterStatus" onchange="filterErrorReports()" style="min-width: 150px;">
            <option value="pending">Ch∆∞a x·ª≠ l√Ω (Pending)</option>
            <option value="resolved">ƒê√£ x·ª≠ l√Ω (Resolved)</option>
            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
          </select>
        </div>

        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Ng∆∞·ªùi B√°o</th>
                <th>Phim & T·∫≠p</th>
                <th>Ph√¢n Lo·∫°i</th>
                <th>M√¥ T·∫£ L·ªói</th>
                <th>Th·ªùi Gian</th>
                <th>Tr·∫°ng Th√°i</th>
                <th style="min-width: 140px; text-align: center;">Thao t√°c</th>
              </tr>
            </thead>
            <tbody id="errorReportsTable">
              <!-- Data s·∫Ω ƒë∆∞·ª£c load ƒë·ªông -->
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Modal Xem ·∫¢nh Bill L·ªõn (D√†nh cho Admin) -->
<div class="modal-overlay" id="billViewportModal" style="z-index: 99999;">
  <div class="modal" style="max-width: 800px; width: 95vw; background: transparent; box-shadow: none;">
    <div style="text-align: right; margin-bottom: 10px;">
      <button class="btn btn-danger" onclick="closeModal('billViewportModal')" style="border-radius: 50%; width: 40px; height: 40px; padding: 0;">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body" style="padding: 0; text-align: center;">
      <img id="billViewportImage" src="" alt="Bill View" style="max-width: 100%; max-height: 85vh; object-fit: contain; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);" />
    </div>
  </div>
</div>

<!-- Modal Th√™m/S·ª≠a Di·ªÖn Vi√™n -->
<div class="modal-overlay" id="actorModal">
  <div class="modal">
    <div class="modal-header">
      <h3 id="actorModalTitle">Th√™m Di·ªÖn Vi√™n M·ªõi</h3>
      <button class="modal-close" onclick="closeModal('actorModal')">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form id="actorForm" onsubmit="handleActorSubmit(event)">
        <input type="hidden" id="actorId" />
        
        <div class="form-group" style="text-align: center; margin-bottom: 20px;" id="actorAvatarPreviewWrapper">
          <img id="actorAvatarPreview" src="https://ui-avatars.com/api/?name=Actor&background=random&color=fff&size=120" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.1); margin-bottom: 15px;" alt="Avatar Preview">
        </div>

        <div class="form-group" style="position: relative;">
          <label class="form-label">T√™n <span style="color:red">*</span></label>
          <input
            type="text"
            class="form-input"
            id="actorName"
            required
            placeholder="Nh·∫≠p t√™n (VD: Tom Cruise, Christopher Nolan)"
            oninput="updateActorPreview(); checkActorDuplicate(this.value);"
            autocomplete="off"
          />
          <div id="actorDuplicateSuggestions" class="suggestions-list"></div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Link ·∫¢nh / Avatar (T√πy ch·ªçn)</label>
          <div class="input-with-action" style="display: flex; gap: 8px;">
            <input
              type="url"
              class="form-input"
              id="actorAvatar"
              placeholder="https://..."
              style="flex: 1;"
              oninput="updateActorPreview()"
            />
            <button type="button" class="btn btn-secondary btn-upload" onclick="document.getElementById('actorAvatarUpload').click()" style="white-space: nowrap;">
              <i class="fas fa-upload"></i> T·∫£i l√™n
            </button>
            <input type="file" id="actorAvatarUpload" accept="image/*" style="display: none;" onchange="uploadMovieImage(this, 'actorAvatar', 'actorAvatarPreviewWrapper')">
          </div>
          <small class="text-muted" style="display: block; margin-top: 5px;">M·∫∑c ƒë·ªãnh d√πng ·∫£nh t·ª± sinh t·ª´ t√™n n·∫øu ƒë·ªÉ tr·ªëng.</small>
        </div>

        <div class="form-group">
          <label class="form-label">T√™n g·ªçi kh√°c <small style="opacity:0.6">(ngƒÉn c√°ch b·∫±ng d·∫•u ph·∫©y)</small></label>
          <input
            type="text"
            class="form-input"
            id="actorAltNames"
            placeholder="VD: ÍπÄÏÑ†Ìò∏, Kim Seonho, Kim Sun Ho"
          />
          <small class="text-muted" style="display: block; margin-top: 5px;">T√™n ti·∫øng H√†n, ti·∫øng Trung, ho·∫∑c bi·ªát danh kh√°c. Gi√∫p t√¨m nhanh khi th√™m phim.</small>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <div class="form-group">
            <label class="form-label">Vai tr√≤</label>
            <select class="form-select" id="actorRole">
              <option value="actor">Di·ªÖn vi√™n</option>
              <option value="director">ƒê·∫°o di·ªÖn</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Gi·ªõi t√≠nh</label>
            <select class="form-select" id="actorGender">
              <option value="">Kh√¥ng r√µ</option>
              <option value="Nam">Nam</option>
              <option value="N·ªØ">N·ªØ</option>
            </select>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <div class="form-group">
            <label class="form-label">Ng√†y sinh</label>
            <input type="date" class="form-input" id="actorDob" />
          </div>
          <div class="form-group" style="position: relative;">
            <label class="form-label">Qu·ªëc gia / N∆°i s·ªëng</label>
            <input 
              type="text" 
              class="form-input" 
              id="actorCountry" 
              placeholder="VD: H√†n Qu·ªëc, M·ªπ, Vi·ªát Nam..." 
              autocomplete="off"
              oninput="handleCountryInput(this.value)"
              onfocus="handleCountryInput(this.value)"
              onkeydown="handleCountryKeydown(event)"
            />
            <div id="actorCountrySuggestions" class="suggestions-list"></div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Gi·ªõi thi·ªáu ng·∫Øn g·ªçn</label>
          <textarea
            class="form-textarea"
            id="actorBio"
            rows="3"
            placeholder="Th√¥ng tin v·ªÅ di·ªÖn vi√™n n√†y..."
          ></textarea>
        </div>

        <div class="form-actions" style="margin-top: 25px; display: flex; justify-content: flex-end; gap: 10px;">
          <button type="button" class="btn btn-secondary" onclick="closeModal('actorModal')">
            H·ªßy
          </button>
          <button type="submit" class="btn btn-primary">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal C·∫≠p nh·∫≠t h√†ng lo·∫°t Di·ªÖn vi√™n -->
<div class="modal-overlay" id="bulkUpdateActorModal">
  <div class="modal" style="max-width: 450px;">
    <div class="modal-header">
      <h3 id="bulkUpdateModalTitle">C·∫≠p nh·∫≠t h√†ng lo·∫°t</h3>
      <button class="modal-close" onclick="closeModal('bulkUpdateActorModal')">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <form id="bulkUpdateActorForm" onsubmit="handleBulkUpdateSubmit(event)">
        <input type="hidden" id="bulkUpdateField" />
        
        <div id="bulkGenderField" class="form-group hidden">
          <label class="form-label">Ch·ªçn gi·ªõi t√≠nh m·ªõi:</label>
          <select class="form-select" id="bulkActorGender">
            <option value="">Kh√¥ng r√µ</option>
            <option value="Nam">Nam</option>
            <option value="N·ªØ">N·ªØ</option>
          </select>
        </div>

        <div id="bulkCountryField" class="form-group hidden" style="position: relative;">
          <label class="form-label">Nh·∫≠p n∆°i s·ªëng m·ªõi:</label>
          <input 
            type="text" 
            class="form-input" 
            id="bulkActorCountry" 
            placeholder="VD: H√†n Qu·ªëc, M·ªπ..." 
            autocomplete="off"
            oninput="handleBulkCountryInput(this.value)"
            onfocus="handleBulkCountryInput(this.value)"
          />
          <div id="bulkActorCountrySuggestions" class="suggestions-list"></div>
        </div>

        <div class="form-actions" style="margin-top: 25px; display: flex; justify-content: flex-end; gap: 10px;">
          <button type="button" class="btn btn-secondary" onclick="closeModal('bulkUpdateActorModal')">
            H·ªßy
          </button>
          <button type="submit" class="btn btn-primary">C·∫≠p nh·∫≠t (<span id="bulkUpdateCount">0</span>)</button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- Modal So s√°nh & C·∫≠p nh·∫≠t Di·ªÖn vi√™n t·ª´ API -->
<div class="modal-overlay" id="actorImportCompareModal">
  <div class="modal" style="max-width: 850px; width: 95%;">
    <div class="modal-header">
      <h3>So s√°nh & B·ªï sung d·ªØ li·ªáu Di·ªÖn vi√™n</h3>
      <button class="modal-close" onclick="closeModal('actorImportCompareModal')">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body" style="padding: 0;">
      <div id="compareSummary" style="padding: 15px 20px; background: rgba(77, 171, 247, 0.1); border-bottom: 1px solid var(--border-color); font-size: 0.9rem;">
        Ph√°t hi·ªán <strong id="compareCount">0</strong> di·ªÖn vi√™n c√≥ th√¥ng tin ƒë·∫ßy ƒë·ªß h∆°n t·ª´ API. Admin h√£y ki·ªÉm tra v√† duy·ªát c·∫≠p nh·∫≠t.
      </div>
      
      <div class="compare-container" style="max-height: 60vh; overflow-y: auto;">
        <table class="admin-table compare-table">
          <thead>
            <tr>
              <th style="width: 150px;">Tr∆∞·ªùng d·ªØ li·ªáu</th>
              <th>Hi·ªán t·∫°i (Database)</th>
              <th>M·ªõi (T·ª´ API)</th>
            </tr>
          </thead>
          <tbody id="actorCompareList">
            <!-- D·ªØ li·ªáu so s√°nh render t·∫°i ƒë√¢y -->
          </tbody>
        </table>
      </div>

      <div class="compare-navigation" style="display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; border-top: 1px solid var(--border-color);">
        <div class="compare-info">
            ƒêang xem: <strong id="compareCurrentIndex">1</strong> / <span id="compareTotal">0</span>
        </div>
        <div class="compare-actions" style="display: flex; gap: 10px;">
          <button type="button" class="btn btn-secondary" id="btnPrevCompare" onclick="navigateCompare(-1)">
            <i class="fas fa-chevron-left"></i> Tr∆∞·ªõc
          </button>
          <button type="button" class="btn btn-secondary" id="btnNextCompare" onclick="navigateCompare(1)">
            Ti·∫øp <i class="fas fa-chevron-right"></i>
          </button>
          <button type="button" class="btn btn-primary" onclick="applyCurrentActorUpdate()" style="background: #51cf66;">
            <i class="fas fa-check"></i> Duy·ªát c·∫≠p nh·∫≠t n√†y
          </button>
        </div>
      </div>
    </div>
    <div class="modal-footer" style="padding: 15px 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 10px;">
        <button type="button" class="btn btn-secondary" onclick="closeModal('actorImportCompareModal')">ƒê√≥ng</button>
        <button type="button" class="btn btn-primary" onclick="applyAllActorUpdates()" style="background: var(--accent-primary);">
            <i class="fas fa-file-import"></i> Duy·ªát c·∫≠p nh·∫≠t t·∫•t c·∫£ (<span id="compareTotalAll">0</span>)
        </button>
    </div>
  </div>
</div>
